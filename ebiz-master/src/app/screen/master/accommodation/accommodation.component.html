<!-- <p>accommodation works!</p> -->
<div class="col-12 boxcolor-mm background-Slide animate__animated animate__fadeIn" [hidden]="Final" style="height: 350px">
  <div class="row math-height">
    <div class="col-lg-12">
      <div class="card box-shadow-1 mt-3">
        <div class="card-body m-0 p-0">
          <div class="row mx-0">
            <!-- ACCOMMDATION -->
            <div class="col-lg-6 col-md-6 col-sm-12" style="min-height: 67px">
              <div class="marker marker-ribbon marker-top-blue pos-absolute mt-4 l-0 pl-5 pr-5">
                <p class="tx-24 m-0">&#32;<i class="fa fa-bed"></i>&#32;ACCOMMODATION</p>
              </div>
            </div>

            <div class="col-lg-6 col-md-6 col-sm-12">
              <div class="container px-0">
                <!-- <button class="buttonHide" (click)="statusChange()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button> -->
                <div class="text-center text-md-right mt-4 pr-4" *ngIf="status != true">
                  <p class="tx-24 m-0 tx-top-blue text-bold-500">
                    <!-- {{ empname }} -->
                  </p>
                </div>
                <div class="mt-4 col-12 col-md-10 col-lg-8 ml-md-auto" *ngIf="status">
                  <!-- {{ emp_select }}
                  {{ select.value }} -->
                  <mat-select #select="ngModel" [(ngModel)]="emp_select" (ngModelChange)="update_userByDOCchang(select.value)" class="form-control line-height-2 tx-gray-700 text-bold-500" placeholder="Select">
                    <mat-option *ngFor="let topping of emp_list; let i = index" [value]="topping.emp_id">
                      {{ topping.userDisplay }}
                    </mat-option>
                  </mat-select>
                </div>

                <div class="text-right mt-4 pr-4" *ngIf="pathPhase1">
                  <span class="link-text">
                    <p class="tx-14 m-0 text-bold-500" (click)="OpenDocument(doc_id, pathPhase1)">
                      Document No: {{ doc_id }}
                    </p>
                    <i class="fa fa-external-link ml-1"></i>
                  </span>
                </div>
              </div>
            </div>

            <!-- ** Traveler Detail -->
            <div class="col-12" *ngIf="userDetail">
              <div class="container border-bottom-3 border-bottom-grey-blue border-bottom-lighten-5 mb-4 py-4">
                <div class="row no-gutters">
                  <p class="col-4 col-lg-2 col-md-2 tx-gray-700 tx-14 text-dark text-bold-500">Travel Topic :</p>
                  <p class="col-8 col-lg-10 col-md-10 tx-gray-700 tx-14 text-bold-500 text-capitalize">
                    <!-- {{ userDetail.travel_topic ? userDetail.travel_topic : '' }} -->
                  </p>
                  <p class="col-4 col-md-2 tx-gray-700 tx-14 text-dark text-bold-500">Business Date :</p>
                  <p class="col-8 col-md-4 tx-gray-700 tx-14 text-bold-500">
                    <!-- {{ userDetail.business_date ? userDetail.business_date : '' }} -->
                  </p>
                  <p class="col-4 col-md-2 offset-0 offset-md-1 tx-gray-700 tx-14 m-0 text-dark text-bold-500">
                    Travel Date :
                  </p>
                  <p class="col-8 col-md-4 tx-gray-700 tx-14 text-bold-500">
                    <!-- {{ userDetail.travel_date ? userDetail.travel_date : '' }} -->
                  </p>
                  <p class="col-4 col-md-2 tx-gray-700 tx-14 text-dark text-bold-500">
                    <!-- {{ TRAVEL_TYPE }} -->
                  </p>
                  <p class="col-8 col-md-4 tx-gray-700 tx-14 text-bold-500">
                    <!-- {{ userDetail.country_city ? userDetail.country_city : '' }} -->
                  </p>
                  <p class="col-4 col-md-2 tx-gray-700 tx-14 text-dark text-bold-500">Total Traveler(s) :</p>
                  <p class="col-8 col-md-4 tx-gray-700 tx-14 text-bold-500">
                    <!-- {{ emp_list.length }}  -->
                    Person(s)</p>
                </div>
              </div>
            </div>
            <!-- ** Traveler Detail -->

            <!-- //width sm -->

            <div class="col-12 py-3 mt-0 mb-4">
              <div class="row justify-content-center align-items-baseline">
                <ul id="progressbar" class="px-0 px-md-1 mb-0">
                  <li class="cursor-pointer" [ngClass]="{ active: docStatus(1) }" id="time"><strong></strong></li>
                  <li class="cursor-pointer" [ngClass]="{ active: docStatus(2) }" id="pencil"><strong></strong></li>
                  <li class="cursor-pointer" [ngClass]="{ active: docStatus(3) }" id="cog"><strong></strong></li>
                  <li class="cursor-pointer" [ngClass]="{ active: docStatus(4) }" id="check"><strong></strong></li>
                </ul>
              </div>
            </div>

            <div class class="col-lg-12 mx-4">
              <div class="row">
                <ng-container *ngFor="let dt of accommodation_booking; let i = index">
                  <ng-container *ngIf="dt.emp_id == emp_select">
                    <div class="col-lg-12">
                      <input class="" type="checkbox" [(ngModel)]="dt.booking" [disabled]="show_button == false" (change)="disblebox_booking(i, dt.booking)" />&nbsp;&nbsp;
                      <label class="tx-14">Ask Booking by Company</label>
                    </div>
                    <div class="col-lg-12 ml-5">
                      <input class="" type="checkbox" [(ngModel)]="dt.search" (ngModelChange)="search_recommend('search', i)" [disabled]="dt.booking == false || show_button == false" (change)="openbowser(i, show_button)" />&nbsp;&nbsp;
                      <!-- (change)="openModalx(template,'template1',null)" -->
                      <label class="tx-14">Search Accommodation</label>
                      <i class="fa fa-search ml-3 cursor-pointer" #btnCloseX data-toggle="modal" *ngIf="dt.search" style="vertical-align: midle" (click)="openbowser(i, show_button)" data-target="#exampleModalCenter" aria-hidden="true"></i>
                    </div>
                    <div class="col-lg-12 ml-5">
                      <input class="" type="checkbox" [(ngModel)]="dt.recommend" (ngModelChange)="search_recommend('recommend', i)" [disabled]="dt.booking == false || show_button == false" />&nbsp;&nbsp;
                      <label class="tx-14">As Company Recommend</label>
                    </div>
                    <div class="col-lg-12">
                      <input class="" id="checkbox_Booked" type="checkbox" [(ngModel)]="dt.already_booked" [disabled]="show_button == false" (change)="disblebox(dt.already_booked, i)" />&nbsp;&nbsp;
                      <label class="tx-14">Already Booked</label>

                      <div class="col-sm-5 col-md-4 col-lg-6 animate__animated animate__fadeIn" *ngIf="dt.already_booked">
                        <div class="form-row">
                          <div class="form-group">
                            <select class="form-control form-control-lg tx-14" [(ngModel)]="dt.already_booked_id" id="Already_Booked" (ngModelChange)="ModelChang(i)" [disabled]="!dt.already_booked">
                              <option value="" disabled>-- Please Select --</option>
                              <option *ngFor="let item of Arr_m_book_type" [value]="item.id">
                                {{ item.name }}
                              </option>
                            </select>
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
              </div>
            </div>

            <div class="col-12 pt-4">
              <div class="container">
                <div class="card box-shadow-1 radiusX mb-0" [class.mb-3]="!show_button">
                  <div class="card-body">
                    <div class="col-12 px-0 mx-0">
                      <div class="table-responsive scroll-hori my-2 mx-0 px-0" style="max-height: 350px; max-width: 100%">
                        <table id="table_detail" class="table table table-striped table-hover table-bordered">
                          <thead class="text-center font-weight-bold tx-14 tx-gray-700">
                            <tr>
                              <th style="width: 20%">Country / City</th>
                              <th style="width: 30%">
                                <span class="w-100">Hotel Name</span>
                              </th>
                              <th style="width: 15%">Check in</th>
                              <th style="width: 15%">Check out</th>
                              <th style="width: 15%">RoomType</th>
                              <th style="width: 5%"></th>
                            </tr>
                          </thead>
                          <!-- {{
                            emp_select
                          }} -->
                          <tbody class="border-0">
                            <ng-container *ngFor="let ds of accommodation_booking; let i = index">
                              <ng-container *ngIf="ds.emp_id == emp_select">
                                <tr class="" *ngFor="let dt of data_retune(); let ii = index">
                                  <!-- *ngIf="dt.action_type != 'delete' && dt.emp_id == emp_select" -->
                                  <ng-container *ngIf="dt.action_type != 'delete'">
                                    <td>
                                      <input class="form-control h-50 text-center" [(ngModel)]="dt.country" (ngModelChange)="model_action_change(dt.id)" [disabled]="show_button == false" />
                                      <!-- <h5 *ngIf="dt.action_type != 'delete'">{{xx}}</h5> -->
                                    </td>
                                    <td>
                                      <input class="form-control h-50 text-center" [(ngModel)]="dt.hotel_name" (ngModelChange)="model_action_change(dt.id)" [disabled]="show_button == false" />
                                    </td>
                                    <td>
                                      <!-- <input class="form-control h-50" value="{{ xxx.check_in }}" /> -->
                                      <input type="text" bsDatepicker #date1="ngModel" class="form-control h-50 text-center" [(ngModel)]="dt.Datefrom" (ngModelChange)="model_action_change(dt.id)" (change)="date1.invalid && date1.control.setValue('')" [maxDate]="dt.Dateto" [disabled]="show_button == false" [bsConfig]="{
                                          dateInputFormat: 'DD MMM YYYY',
                                          showWeekNumbers: false
                                        }" />
                                    </td>
                                    <td>
                                      <!-- <input class="form-control h-50" value="{{ xxx.check_out }}" /> -->
                                      <input type="text" bsDatepicker #date2="ngModel" class="form-control h-50 text-center" [(ngModel)]="dt.Dateto" (change)="date2.invalid && date2.control.setValue('')" [disabled]="show_button == false" [minDate]="dt.Datefrom" (ngModelChange)="model_action_change(dt.id)" [bsConfig]="{
                                          dateInputFormat: 'DD MMM YYYY',
                                          showWeekNumbers: false
                                        }" />
                                    </td>
                                    <td>
                                      <!-- <input class="form-control h-50  text-center d-none" [(ngModel)]="dt.roomtype"
                                      [disabled]="ds.recommend || show_button == false"
                                       /> -->
                                      <select class="form-control text-center" style="height: 30px" [(ngModel)]="dt.roomtype" (ngModelChange)="model_action_change(dt.id)" [disabled]="show_button == false">
                                        <option value="" selected disabled>Please Select</option>
                                        <option *ngFor="let item of MT_room_type" [value]="item.id" class="text-left">
                                          {{ item.name }}
                                        </option>
                                      </select>
                                    </td>

                                    <!-- <option value="2">Superior</option>
                                        <option value="3">Deluxe</option>
                                        <option value="4">Suite</option> -->

                                    <td class="" style="vertical-align: middle">
                                      <div *ngIf="show_button == true">
                                        <div class="d-flex">
                                          <!-- <span class="fa fa-minus-circle danger cursor-pointer  mr-1" aria-hidden="true" *ngIf="ii > 0"
                                       (click)="deleterow(ii)"></span> -->
                                          <span class="fa fa-minus-circle danger cursor-pointer mr-1" aria-hidden="true" (click)="deleterow(dt.id, dt.emp_id)"></span>
                                          <span class="fa fa-plus-circle success cursor-pointer" aria-hidden="true" (click)="addrow()" *ngIf="ii == data_retune().length - 1">
                                          </span>
                                        </div>
                                      </div>
                                    </td>
                                  </ng-container>
                                </tr>
                              </ng-container>
                            </ng-container>
                          </tbody>
                        </table>
                      </div>

                      <div class="col-12 px-0 mx-0">
                        <div class="col-12 p-0 m-0" *ngFor="let book of accommodation_booking; let i = index">
                          <ng-container *ngIf="book.emp_id == emp_select">
                            <div class="row col-12 tx-gray-700 ml-0 mr-2 pl-0 pr-2">
                              <div class="col-lg-4 col-md-4 col-sm-12 col-12 pt-0 px-0">
                                <label class="
                                    col-lg-6 col-md-6 col-sm-12 col-12
                                    pl-0
                                    basic-url
                                    font-weight-bold
                                    tx-14
                                    text-nowrap
                                  ">Booking Status
                                  <span [ngClass]="check_el(booking_status) ? 'text-error' : 'span-mark'" [hidden]="book.already_booked == false">*</span>
                                  :</label>
                                <div class="mr-2 my-0">
                                  <!-- <select
                                    #select
                                    class="form-control form-control-lg tx-14"
                                    style="margin: 0px; height: 40px"
                                    [(ngModel)]="book.booking_status"
                                    [disabled]="book.already_booked == false || show_button == false"
                                  >
                                    <option value="" disabled>-- Please Select --</option>
                                    <option *ngFor="let topping of booking_master; let i = index" [value]="topping.id">
                                      {{ topping.name }}
                                    </option>
                                  </select> -->
                                  <select #select class="form-control form-control-lg tx-14" style="margin: 0px; max-height: 40px" #booking_status="ngModel" [(ngModel)]="book.booking_status" [disabled]="show_button == false">
                                    <option value="" disabled>-- Please Select --</option>
                                    <option *ngFor="let topping of booking_master; let i = index" [value]="topping.id">
                                      {{ topping.name }}
                                    </option>
                                  </select>
                                </div>
                              </div>

                              <div class="col-lg-4 col-md-4 col-sm-12 col-12 pl-0 pr-0">
                                <label class="
                                    col-lg-6 col-md-6 col-sm-12 col-12
                                    pl-0
                                    mx-1
                                    basic-url
                                    font-weight-bold
                                    tx-14
                                    text-nowrap
                                  ">Additional Request
                                  <!-- <span [ngClass]="
                                check_el(book.additional_request)
                                  ? 'text-error'
                                  : 'span-mark'
                              ">*</span> -->
                                  :
                                </label>
                                <div class="mr-2">
                                  <!-- <input
                                    class="form-control mt-0"
                                    [(ngModel)]="book.additional_request"
                                    [disabled]="book.already_booked == false || show_button == false"
                                    (ngModelChange)="model_action_change_book(emp_select)"
                                    placeholder="King Size / One Bed Room / Two Bed Room / Allergy Food  "
                                  /> -->
                                  <input class="form-control mt-0" [(ngModel)]="book.additional_request" [disabled]="show_button == false" (ngModelChange)="model_action_change_book(emp_select)" placeholder="King Size / One Bed Room / Two Bed Room / Allergy Food  " />
                                </div>
                              </div>

                              <div class="col-lg-4 col-md-4 col-sm-12 col-12 px-0 pr-0">
                                <label class="col-lg-6 col-md-6 col-sm-12 col-12 pl-0 basic-url font-weight-bold tx-14">Map
                                  <!-- <span [ngClass]="check_el(book.place_name) ? 'text-error' : 'span-mark'">*</span> -->
                                  :
                                </label>
                                <div class="mr-2">
                                  <!-- <input
                                    class="form-control mr-2"
                                    [(ngModel)]="book.place_name"
                                    [disabled]="book.already_booked == false || show_button == false"
                                    (click)="openModalx(template2, 'template2', null)"
                                  /> -->
                                  <input class="form-control mr-2" [(ngModel)]="book.place_name" [disabled]="show_button == false" (click)="openModalx(template2, 'template2', null)" />
                                </div>
                              </div>
                            </div>
                          </ng-container>

                          <ng-container *ngIf="book.emp_id == emp_select">
                            <div class="row col-12 px-0 mx-0 pt-2">
                              <div class="input-group col-12 pt-2 px-0 tx-gray-700">
                                <label class="basic-url font-weight-bold tx-14">Booking Confirmation : </label>
                                <div class="custom-file w-100 pt-0">
                                  <input type="file" id="file_id" accept="file_extension" #file class="d-none" (change)="onFileSelect($event, book.id)" />

                                  <button class="btn btn-round btn-min-width mb-1 bg-top-blue" style="color: white" (click)="file.click()" [disabled]="show_button == false" [class.cursor-not-allowed]="show_button == false">
                                    Upload
                                  </button>
                                  <!-- [disabled]="status == false" -->
                                </div>
                                <!-- {{ book | json }} -->
                                <span class="pt-2">
                                  <div class="mx-1" *ngFor="let item of img_list; let ix = index">
                                    <ng-container *ngIf="item.emp_id == emp_select && item.filename != '' && item.filename != null">
                                      <div class="align-items-center row mx-0 pb-2" *ngIf="item.action_type != 'delete'">
                                        <iframe id="{{ 'loadId' + ix }}" class="d-none" src="https://via.placeholder.com/350x150" width="350" height="150" frameborder="0"></iframe>
                                        <i class="material-icons tx-16 tx-top-blue tx-bold"> attach_file </i>
                                        <a class="mx-2 text-primary txunderline text-bold-600" (click)="downloadFile(item.path + item.filename, item.filename)" target="_blank">{{ item.filename }}</a><i class="cursor-pointer fa fa-minus-circle danger" style="vertical-align: super" style="vertical-align: middle" [hidden]="show_button == false" (click)="deletefile(ix)"></i>
                                      </div>
                                    </ng-container>
                                  </div>
                                </span>
                              </div>
                            </div>
                          </ng-container>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- <div class="row mx-1 my-3 gap"  *ngIf="show_button != false"> -->
                <div class="row mx-1 my-3 gap">
                  <ng-container *ngIf="show_button != false">
                    <button class="btn btn-round btn-min-width bg-top-pink text-white font-weight-bold" (click)="saveaction_S()">
                      Save</button><!--  Save xx  -->

                    <button class="
                        btn btn-round btn-min-width
                        bg-white
                        pink
                        border-pink
                        text-pink
                        font-weight-bold
                        mr-0 mr-md-auto
                      " (click)="CancelData()">
                      Cancel
                    </button>
                    <!--  Cancel xx  -->

                    <button class="bg-white border-color-top btn btn-round btn-min-width tx-color-top font-weight-bold" (click)="openModalCopy(templateCopydetail)" [hidden]="status == false" [disabled]="empCount" [class.cursor-not-allowed]="empCount">
                      Copy Details
                    </button>
                    <!--  Copy Detail xx  -->

                    <button class="btn btn-round bg-top-blue btn-min-width text-white font-weight-bold" (click)="submithx()">
                      Submit
                    </button>
                    <!--  Submit xx  -->
                  </ng-container>
                </div>
              </div>
            </div>

            <button class="d-none" #btnCloseAA (click)="modalRef?.hide()"></button>

            <ng-template #template2>
              <div class="modal-header">
                <div class="col-sm-12 px-0">
                  <span class="modal-title tx-20 d-flex align-items-center" id="my-modal-title"><span class="material-icons"> location_on </span> <span>Map</span>
                    <button type="button" #btnClose class="close" style="color: red" (click)="modalRef?.hide()">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </span>
                </div>
              </div>
              <div class="modal-body">
                <div class="row">
                  <div class="col-12 px-0" *ngFor="let book_map of accommodation_booking; let i = index; let mapx">
                    <div *ngIf="book_map.emp_id == emp_select">
                      <div class="input-group col-12 pb-4">
                        <!-- <label class="basic-url tx-gray-700 text-bold-500 tx-14">ชื่อสถานที่:</label> -->
                        <label class="basic-url tx-gray-700 text-bold-500 tx-14">Place Name :</label>
                        <div class="custom-file w-100">
                          <input id="plan_namex" class="form-control" value="{{ book_map.place_name }}" #plan_namex />
                        </div>
                        <!-- [(ngModel)]="book_map.place_name" -->
                      </div>

                      <div class="input-group col-12 pb-2 pt-2">
                        <label class="basic-url tx-gray-700 text-bold-500 tx-14">URL Map :</label>
                        <div class="custom-file w-100">
                          <input id="mapx" class="form-control" value="{{ book_map.map_url }}" #mapx />
                        </div>
                        <!-- [(ngModel)]="book_map.map_url" -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <div class="col-12 px-0">
                  <button type="button" class="btn btn-round btn-top white btn-min-width" (click)="addmap(emp_select)">
                    Save
                  </button>
                </div>
              </div>
            </ng-template>

            <ng-template #templateCopydetail>
              <div class="modal-header">
                <span class="modal-title tx-20" id="my-modal-title">
                  <i class="material-icons tx-bold tx-20">content_copy</i> Copy Details
                </span>
                <button class="close" style="color: red" (click)="[modalRef?.hide(), (User_selected_Copy = []), (airticket_copy_selected = '1')]">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div class="row">
                  <div class="col-12">
                    <div class="input-group mb-4">
                      <label class="basic-url font-weight-bold tx-18 underline text-underline tx-gray-700">
                        Choose Type
                      </label>
                    </div>
                    <div class="form-group">
                      <div class="input-group flex-column">
                        <div class="custom-control custom-radio">
                          <fieldset class="radio">
                            <input type="radio" name="customer1" [(ngModel)]="airticket_copy_selected" id="checked1" value="1" (ngModelChange)="airticket_copy_selected == '1' ? (User_selected_Copy = []) : ''" />
                            <label class="text-bold-400 tx-16 mx-1" for="checked1">All Person</label>
                          </fieldset>
                        </div>
                        <div class="custom-control custom-radio">
                          <fieldset class="radio">
                            <input type="radio" name="customer2" [(ngModel)]="airticket_copy_selected" id="checked2" value="2" />
                            <label class="text-bold-400 tx-16 mx-1" for="checked2">Choose by Person</label>
                          </fieldset>
                        </div>
                        <div class="col-12 animate__animated animate__fadeIn" *ngIf="airticket_copy_selected == '2'">
                          <mat-select [(ngModel)]="User_selected_Copy" *ngIf="status" #user_selected="ngModel" multiple class="form-control line-height-2 tx-gray-700 text-bold-500" placeholder="Select">
                            <mat-option *ngFor="let item of accommodation_emp_list" [value]="item" [hidden]="item.emp_id == emp_id">
                              {{ item.userDisplay }}
                            </mat-option>
                          </mat-select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <div class="col-12 px-0">
                  <button type="button" class="btn btn-round btn-top white btn-min-width tx-14" (click)="[copyDetailAllEmp2(emp_select), modalRef?.hide()]" [disabled]="User_selected_Copy.length == 0 && airticket_copy_selected == '2'">
                    Paste Data
                  </button>
                </div>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>